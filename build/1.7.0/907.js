"use strict";(globalThis.webpackChunknewfold_Onboarding=globalThis.webpackChunknewfold_Onboarding||[]).push([[907],{9291:(e,t,a)=>{a.d(t,{L:()=>n,Y:()=>l.Z});var l=a(35),o=a(9307),r=a(682);const n=()=>(0,o.createElement)("div",{className:"image-upload-loader--loading-box"},(0,o.createElement)(r.Z,{type:"load",className:"image-upload-loader--loading-box__loader"}))},676:(e,t,a)=>{a.d(t,{Z:()=>m});var l=a(9307),o=a(5736),r=a(5609),n=a(9818),i=a(9250),s=a(7533),c=a(6831),d=a(8395),u=a(2200);const m=(0,l.memo)((e=>{let{callback:t=!1}=e;const a=(0,i.s0)(),m=(0,i.TH)(),{nextStep:v,currentData:p,socialData:_}=(0,n.useSelect)((e=>({nextStep:e(c.h).getNextStep(),currentData:e(c.h).getCurrentOnboardingData(),socialData:e(c.h).getOnboardingSocialData()})),[]),b=null===v||!1===v,{setOnboardingSocialData:g}=(0,n.useDispatch)(c.h);async function w(e){if(p){if(p.isComplete=(new Date).getTime(),null!=e&&e.includes("basic-info")){const e=await async function(){const e=await(0,d.Gw)(),t=await(0,d.I2)(_);return null!==(null==t?void 0:t.error)?null==e?void 0:e.body:null==t?void 0:t.body}();e&&g(e)}(0,s.kB)(p)}const t="ecommerce"===window.nfdOnboarding.currentFlow?u.br:u.hF;window.location.replace(t)}return b?(0,l.createElement)(r.Button,{className:"skip-button",onClick:()=>w(m.pathname)},(0,o.__)("Skip this Step","wp-module-onboarding")):(0,l.createElement)(r.Button,{className:"skip-button",onClick:()=>{"function"==typeof t&&t(),a(v.path)}},(0,o.__)("Skip this Step","wp-module-onboarding"))}))},4907:(e,t,a)=>{a.r(t),a.d(t,{default:()=>C});var l=a(9307),o=a(1996),r=a(4316),n=a(9818),i=a(7798),s=a(5736),c=a(1392);const d=(0,l.memo)((e=>{let{title:t,hint:a,placeholder:o,height:r,maxCharacters:n,textValue:i,textValueSetter:c}=e;const d=(0,l.useRef)(null),[u,m]=(0,l.useState)("nfd-input__field");return(0,l.useEffect)((()=>{d.current.style.height=r;const e=d.current.scrollHeight;d.current.style.height=e+"px"}),[i]),(0,l.createElement)("div",{className:"nfd-input"},(0,l.createElement)("label",null,(0,l.createElement)("div",{className:"nfd-input__label"},(0,l.createElement)("p",{className:"nfd-input__label_title"},(0,s.__)(t,"wp-module-onboarding")),(0,l.createElement)("p",{className:"nfd-input__label_maxChar"},`(${n-(null==i?void 0:i.length)} characters left)`)),(0,l.createElement)("textarea",{type:"text",className:u,ref:d,style:{height:r},placeholder:o,value:i,maxLength:n,onChange:e=>(e=>{e.preventDefault(),c(e.target.value),e.target.value.length==n?m("nfd-input__field nfd-input__field_error"):m("nfd-input__field")})(e)}),(0,l.createElement)("p",{className:"nfd-input__hint"},(0,s.__)(a,"wp-module-onboarding"))))}));var u=a(676);const m=(0,l.memo)((e=>{let{title:t,desc:a,icon:o,socialData:r,isSocialFormOpen:n,setIsSocialFormOpen:i}=e;const d={defaultTitle:(0,s.sprintf)(
/* translators: %s: Site */
(0,s.__)("WordPress %s","wp-module-onboarding"),(0,c.I)("Site")),defaultDesc:(0,s.sprintf)(
/* translators: %s: Site */
(0,s.__)("Just another WordPress %s","wp-module-onboarding"),(0,c.I)("Site")),defaultIcon:"--default-logo-icon",defaultUrl:"https://bluehost.com"},u=""===o||void 0===o?d.defaultIcon:o,m=""===t?d.defaultTitle:t,v=""===a?d.defaultDesc:a,p=""===t?d.defaultUrl:`https://${null==t?void 0:t.toLowerCase().replace(/\s/g,"").replace(/\W/g,"")}.com`,[_,b]=(0,l.useState)(""),[g,w]=(0,l.useState)(""),[f,h]=(0,l.useState)(""),[E,N]=(0,l.useState)(""),[S,y]=(0,l.useState)(""),[k,D]=(0,l.useState)(""),[T,I]=(0,l.useState)("");(0,l.useEffect)((()=>{var e,t,a,l,o;if(b(null!==(e=null==r?void 0:r.facebook_site)&&void 0!==e?e:""),w(null!==(t=null==r?void 0:r.twitter_site)&&void 0!==t?t:""),h(null!==(a=null==r?void 0:r.instagram_url)&&void 0!==a?a:""),N(null!==(l=null==r?void 0:r.youtube_url)&&void 0!==l?l:""),y(null!==(o=null==r?void 0:r.linkedin_url)&&void 0!==o?o:""),r&&Object.keys(r).includes("other_social_urls")){var n,i;const e=r.other_social_urls;Object.keys(e).includes("yelp_url")&&D(null!==(n=e.yelp_url)&&void 0!==n?n:""),Object.keys(e).includes("tiktok_url")&&I(null!==(i=e.tiktok_url)&&void 0!==i?i:"")}}),[r]);const O=e=>{let t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol},C=[{url:_,image:"var(--facebook-colored-icon)"},{url:g,image:"var(--twitter-colored-icon)"},{url:f,image:"var(--instagram-colored-icon)"},{url:E,image:"var(--youtube-colored-icon)"},{url:S,image:"var(--linkedin-colored-icon)"},{url:k,image:"var(--yelp-colored-icon)"},{url:T,image:"var(--tiktok-colored-icon)"}];return(0,l.createElement)("div",null,(0,l.createElement)("h4",{className:"mini-preview"},"Preview"),(0,l.createElement)("div",{className:"browser-container"},(0,l.createElement)("div",{className:"browser-row-title"},(0,l.createElement)("div",{className:"browser-row-title_main"},(0,l.createElement)("div",{className:"browser-row-title_buttons"},(0,l.createElement)("span",{className:"browser-dot",style:{background:"#ED594A"}}),(0,l.createElement)("span",{className:"browser-dot",style:{background:"#FDD800"}}),(0,l.createElement)("span",{className:"browser-dot",style:{background:"#5AC05A"}}))),(0,l.createElement)("div",{className:"browser-row-title_bar"},(0,l.createElement)("div",{className:"browser-row-title_bar_before"},(0,l.createElement)("div",{className:"browser-row-title_bar_before-curve"})),(0,l.createElement)("div",{className:"browser-row-title_bar_main"},(0===o||void 0===o)&&(0,l.createElement)("div",{className:"browser-icon-title",style:{content:"var(--default-logo-icon)"}}),0!==o&&void 0!==o&&(0,l.createElement)("img",{className:"browser-icon-title",src:u.url,alt:"Thumb"}),(0,l.createElement)("div",{className:"browser-row-title_bar_main-text"},null==m?void 0:m.substring(0,20)),(0,l.createElement)("div",{className:"browser-row-title_bar_main-cross"},"x")),(0,l.createElement)("div",{className:"browser-row-title_bar_after"},(0,l.createElement)("div",{className:"browser-row-title_bar_after-curve"})))),(0,l.createElement)("div",{className:"browser-row-search"},(0,l.createElement)("div",{className:"browser-row-search__icons"},(0,l.createElement)("div",{className:"browser-icon",style:{backgroundImage:"var(--back-icon)"}}),(0,l.createElement)("div",{className:"browser-icon",style:{backgroundImage:"var(--forward-icon)"}}),(0,l.createElement)("div",{className:"browser-icon",style:{backgroundImage:"var(--reload-icon)"}})),(0,l.createElement)("div",{className:"browser-row-search__search-box"},(0,l.createElement)("input",{className:"browser-row-search__search-box_input",type:"text",onChange:()=>{},value:p})),(0,l.createElement)("div",{className:"browser-row-search__more"},(0,l.createElement)("div",{className:"browser-icon",style:{backgroundImage:"var(--more-icon)"}}))),(0,l.createElement)("div",{className:"browser-content"},(0,l.createElement)("div",{className:"browser-content_top-row"},(0,l.createElement)("h4",{className:"browser-content_top-row-name"},m),(0,l.createElement)("span",{className:"browser-content_top-row-link"},p)),(0,l.createElement)("h5",{className:"browser-content_desc"},v),(0,l.createElement)("div",{className:"browser-content_social"},C.map(((e,t)=>(0,l.createElement)("div",{key:e.image,tabIndex:t+1,role:"button",onClick:()=>i(!n),onKeyDown:()=>i(!n),className:`browser-content_social_icon ${e.url?O(e.url)||"--invalid-url":"--no-url"}`,style:{backgroundImage:e.image}})))))))}));var v=a(682),p=a(8395),_=a(6831),b=a(9291),g=a(6329),w=a(4704),f=a(6989),h=a.n(f);const E=(0,l.memo)((e=>{let{icon:t,iconSetter:a}=e;const o=(0,l.useRef)(null),[r,n]=(0,l.useState)(!1),[i,c]=(0,l.useState)(!1);async function d(e){if(e){n(!0);const o=await async function(e){const t=await function(e){return new Promise(((t,a)=>{const l=new FileReader;l.addEventListener("loadend",(e=>t(e.target.result))),l.addEventListener("error",a),l.readAsArrayBuffer(e)}))}(e),a={"Content-Type":"image/png"};return a["Content-Disposition"]="attachment; filename="+e.name,await(0,g.D)(h()({url:(0,w.$)("media"),method:"POST",headers:a,body:t}))}(e);if(o){var t,l;const e=null==o||null===(t=o.body)||void 0===t?void 0:t.id,r=null==o||null===(l=o.body)||void 0===l?void 0:l.source_url;a({id:e,url:r})}}n(!1)}return(0,l.createElement)("div",{className:"image-uploader"},(0,l.createElement)("h4",{className:"image-uploader_heading"},"Logo"),r?(0,l.createElement)("div",{className:"image-uploader_window"},(0,l.createElement)(b.L,null)):(0,l.createElement)("div",{className:`image-uploader_window ${i&&"image-uploader_window--on-drag"}`,onDrop:e=>(e=>{var t,a,l,o,r;e.preventDefault(),e.stopPropagation(),c(!1),null!=e&&null!==(t=e.dataTransfer)&&void 0!==t&&t.files&&(null==e||null===(a=e.dataTransfer)||void 0===a?void 0:a.files.length)>0&&"image"===(null==e||null===(l=e.dataTransfer)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.type.split("/")[0])&&d(null==e||null===(r=e.dataTransfer)||void 0===r?void 0:r.files[0])})(e),onDragOver:e=>(e=>{e.preventDefault(),e.stopPropagation(),c(!0)})(e),onDragEnter:e=>(e=>{e.preventDefault(),e.stopPropagation(),c(!0)})(e),onDragLeave:e=>(e=>{e.preventDefault(),e.stopPropagation(),c(!1)})(e)},(0,l.createElement)("div",{className:"image-uploader_window-empty"}),(0,l.createElement)("div",{className:"image-uploader_window-logo"},(0===t||void 0===t)&&(0,l.createElement)("div",{className:"image-uploader_window-logo-icon-empty"}),0!==t&&void 0!==t&&(0,l.createElement)("img",{className:"image-uploader_window-logo-icon-selected",src:t.url,alt:"Thumb"})),(0,l.createElement)("div",{className:"image-uploader_window-reset"},0!==t&&void 0!==t&&(0,l.createElement)("button",{className:"image-uploader_window-reset-btn",onClick:()=>{var e;a(0),(null==o||null===(e=o.current)||void 0===e?void 0:e.files.length)>0&&(o.current.value="")}},(0,s.__)("RESET","wp-module-onboarding")),(0===t||void 0===t)&&(0,l.createElement)("button",{className:"image-uploader_window-reset-btn",onClick:()=>{null==o||o.current.click()}},(0,s.__)("UPLOAD","wp-module-onboarding")),(0,l.createElement)("input",{className:"image-uploader_window-select-btn",accept:"image/*",type:"file",ref:o,onChange:e=>{var t,a,l;null!=e&&null!==(t=e.target)&&void 0!==t&&t.files&&(null==e||null===(a=e.target)||void 0===a?void 0:a.files.length)>0&&d(null==e||null===(l=e.target)||void 0===l?void 0:l.files[0])}}))))}));var N=a(2819),S=a.n(N),y=a(9196);const k=e=>{let t;const[a,o]=(0,y.useState)(!0);return"hide"==e.content?(0,l.createElement)("div",null,e.children):(0,l.createElement)("div",{className:"Tooltip-Wrapper",onMouseEnter:()=>{t=setTimeout((()=>{o(!0)}),e.delay||400)},onMouseLeave:()=>{clearInterval(t),o(!1)}},e.children,a&&(0,l.createElement)("div",{className:`Tooltip-Tip ${e.direction||"top"}`},e.content))},D=e=>{let{socialData:t,setSocialData:a,setIsValidSocials:o,isSocialFormOpen:r,setIsSocialFormOpen:n}=e;const[i,c]=(0,l.useState)(""),[d,u]=(0,l.useState)(""),[m,v]=(0,l.useState)(""),[p,_]=(0,l.useState)(""),[b,g]=(0,l.useState)(""),[w,f]=(0,l.useState)(""),[h,E]=(0,l.useState)(""),[N,y]=(0,l.useState)([]),D={FACEBOOK:"facebook",TWITTER:"twitter",INSTAGRAM:"instagram",YOUTUBE:"youtube",LINKEDIN:"linkedin",YELP:"yelp",TIKTOK:"tiktok"},T={FACEBOOK:i,TWITTER:d,INSTAGRAM:m,YOUTUBE:p,LINKEDIN:b,YELP:w,TIKTOK:h};var I={facebook_site:i,twitter_site:d,instagram_url:m,youtube_url:p,linkedin_url:b,other_social_urls:{yelp_url:w,tiktok_url:h}};(0,l.useEffect)((()=>{var e,a,l,o,r;if(c(null!==(e=null==t?void 0:t.facebook_site)&&void 0!==e?e:""),u(null!==(a=null==t?void 0:t.twitter_site)&&void 0!==a?a:""),v(null!==(l=null==t?void 0:t.instagram_url)&&void 0!==l?l:""),_(null!==(o=null==t?void 0:t.youtube_url)&&void 0!==o?o:""),g(null!==(r=null==t?void 0:t.linkedin_url)&&void 0!==r?r:""),t&&Object.keys(t).includes("other_social_urls")){var n,i;const e=t.other_social_urls;Object.keys(e).includes("yelp_url")&&f(null!==(n=e.yelp_url)&&void 0!==n?n:""),Object.keys(e).includes("tiktok_url")&&E(null!==(i=e.tiktok_url)&&void 0!==i?i:"")}}),[t]);const O=S().debounce((function(e,t){let a=!1;if(e===D.TWITTER?(t=t.substring(t.indexOf("@")+1),(t.match("^[A-Za-z0-9_]{1,25}$")||t.match("^http(?:s)?://(?:www.)?twitter.com/([A-Za-z0-9_]{1,25})/?$"))&&(a=!0)):(e=>{let t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol})(t)&&(a=!0),a){var l=N.filter((function(t){return t!==e}));y(l)}else N.includes(e)||y([...N,e]);((e,t,a)=>{if(!e){var l=a.filter((function(e){return e!==t}));y(l)}0==a.length?o(!0):o(!1)})(t,e,N)}),1e3),C=e=>{const t=e.target.value;switch(e.target.id){case D.FACEBOOK:O(D.FACEBOOK,t),c(t),I.facebook_site=t;break;case D.TWITTER:O(D.TWITTER,t),u(t),I.twitter_site=t;break;case D.INSTAGRAM:O(D.INSTAGRAM,t),v(t),I.instagram_url=t;break;case D.YOUTUBE:O(D.YOUTUBE,t),_(t),I.youtube_url=t;break;case D.LINKEDIN:O(D.LINKEDIN,t),g(t),I.linkedin_url=t;break;case D.YELP:O(D.YELP,t),f(t),I.other_social_urls.yelp_url=t;break;case D.TIKTOK:O(D.TIKTOK,t),E(t),I.other_social_urls.tiktok_url=t}a(I)};return(0,l.createElement)("div",{className:"social-form"},(0,l.createElement)("div",{className:"social-form__top-row",onClick:e=>{n(!r)}},(0,l.createElement)("div",{className:"social-form__top-row_heading"},(0,s.__)("Social Media","wp-module-onboarding")),(0,l.createElement)("div",{className:"social-form__top-row_icon "+(r?"social-form__top-row_icon_opened":"")})),(0,l.createElement)("form",{className:r?"social-form__main-active":"social-form__main-hidden",onSubmit:e=>{handleSubmit(e)}},function(){var e,t=[];for(var a in D)t.push((0,l.createElement)("div",{key:D[a]},(0,l.createElement)("label",{className:`social-form__label social-form__label-${D[a]}`},(0,l.createElement)("div",{className:"social-form__label_icon",style:{backgroundImage:`var(--${D[a]}-icon)`}}),(0,l.createElement)("div",{className:"social-form__label_name"},(0,s.__)(D[a].replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})),"wp-module-onboarding"))),(0,l.createElement)(k,{content:N.includes(D[a])?(e=D[a],e===D.TWITTER?`Please enter a valid ${e} URL / username`:`Please enter a valid ${e} URL`):"hide",direction:"top"},(0,l.createElement)("input",{className:N.includes(D[a])?"social-form__box-error":"social-form__box",type:"url",id:`${D[a]}`,value:T[a],onChange:e=>{C(e)}}))));return t}()))},T=()=>{const e=(0,l.useRef)(null),[t,a]=(0,l.useState)(),[o,r]=(0,l.useState)(!1),[b,g]=(0,l.useState)(),[w,f]=(0,l.useState)(""),[h,N]=(0,l.useState)(""),[S,y]=(0,l.useState)(0),[k,T]=(0,l.useState)(),[I,O]=(0,l.useState)(!1),[C,x]=(0,l.useState)(!1),{setOnboardingSocialData:L,setCurrentOnboardingData:A}=(0,n.useDispatch)(_.h),{editEntityRecord:R}=(0,n.useDispatch)(i.store),{getEditedEntityRecord:P}=(0,n.useSelect)((e=>e(i.store)),[]),{currentData:K}=(0,n.useSelect)((e=>({currentData:e(_.h).getCurrentOnboardingData()})),[]),F={siteTitle:{title:(0,s.sprintf)(
/* translators: 1: site */
(0,s.__)("%s Title","wp-module-onboarding"),(0,c.I)("Site")),placeholder:(0,s.sprintf)(
/* translators: 1: site */
(0,s.__)("WordPress %s","wp-module-onboarding"),(0,c.I)("Site")),hint:(0,s.__)("Shown to visitors, search engine and social media posts.","wp-module-onboarding"),maxCharacters:(0,s.__)("80","wp-module-onboarding")},siteDesc:{title:(0,s.sprintf)(
/* translators: 1: site */
(0,s.__)("%s Description","wp-module-onboarding"),(0,c.I)("Site")),placeholder:(0,s.sprintf)(
/* translators: 1: site */
(0,s.__)("Just another WordPress %s.","wp-module-onboarding"),(0,c.I)("Site")),hint:(0,s.sprintf)(
/* translators: 1: site */
(0,s.__)("Tell people who you are, what you sell and why they should visit your %s.","wp-module-onboarding"),(0,c.I)("site")),maxCharacters:(0,s.__)("160","wp-module-onboarding")},error:{title:(0,s.__)("Error Saving Data, Try Again!","wp-module-onboarding")}};return(0,l.useEffect)((()=>{C&&e.current.scrollIntoView()}),[C]),(0,l.useEffect)((()=>{var e,l,n,i,s,c;o||async function(){const e=await(0,p.Gw)();T(null==e?void 0:e.body),a(K),g(t),r(!0),L(null==e?void 0:e.body)}(),P("root","site"),o&&(y(null!==(e=null==t||null===(l=t.data)||void 0===l?void 0:l.siteLogo)&&void 0!==e?e:0),f(null!==(n=null==t||null===(i=t.data)||void 0===i?void 0:i.blogName)&&void 0!==n?n:""),N(null!==(s=null==t||null===(c=t.data)||void 0===c?void 0:c.blogDescription)&&void 0!==s?s:""))}),[o]),(0,l.useEffect)((()=>{const e=setTimeout((()=>{o&&g({data:{siteLogo:S,blogName:w,blogDescription:h,socialData:k}})}),600);return()=>{clearTimeout(e)}}),[w,h,S,k,I]),(0,l.useEffect)((()=>{b&&(async()=>{var e,t,a,l;const o=K;var r,n,i;o.data.siteLogo=null!==(e=b.data.siteLogo)&&void 0!==e?e:o.data.siteLogo,o.data.blogName=null!==(t=b.data.blogName)&&void 0!==t?t:o.data.blogName,o.data.blogDescription=null!==(a=b.data.blogDescription)&&void 0!==a?a:o.data.blogDescription,r=o.data.siteLogo,n=o.data.blogName,i=o.data.blogDescription,R("root","site",void 0,{site_logo:null!=r&&r.id?r.id:null,description:i,title:n}),A(o),L(null!==(l=b.data.socialData)&&void 0!==l?l:k)})()}),[b]),(0,l.createElement)(v.Z,{type:"fade-in-disabled",after:"object"==typeof t&&"object"==typeof k},(0,l.createElement)("div",{className:"basic-info"},(0,l.createElement)("div",{className:"basic-info-form"},(0,l.createElement)("div",{className:"basic-info-form__left"},(0,l.createElement)(d,{title:F.siteTitle.title,hint:F.siteTitle.hint,placeholder:F.siteTitle.placeholder,maxCharacters:F.siteTitle.maxCharacters,height:"47px",textValue:w,textValueSetter:f}),(0,l.createElement)(d,{title:F.siteDesc.title,hint:F.siteDesc.hint,placeholder:F.siteDesc.placeholder,maxCharacters:F.siteDesc.maxCharacters,height:"100px",textValue:h,textValueSetter:N}),(0,l.createElement)("div",{ref:e},(0,l.createElement)(D,{socialData:k,setSocialData:T,isSocialFormOpen:C,setIsValidSocials:O,setIsSocialFormOpen:x}))),(0,l.createElement)("div",{className:"basic-info-form__right"},(0,l.createElement)(E,{icon:S,iconSetter:y}),(0,l.createElement)(m,{icon:S,title:w,desc:h,socialData:k,isSocialFormOpen:C,setIsSocialFormOpen:x}))),(0,l.createElement)(u.Z,null)))};var I=a(2200),O=a(4333);const C=()=>{const e=(0,O.useViewportMatch)("medium"),{setIsDrawerOpened:t,setDrawerActiveView:a,setSidebarActiveView:i,setIsDrawerSuppressed:s,setIsHeaderNavigationEnabled:c}=(0,n.useDispatch)(_.h),{currentStep:d}=(0,n.useSelect)((e=>({currentStep:e(_.h).getCurrentStep()})),[]);return(0,l.useEffect)((()=>{e&&t(!0),i(I.Jq),s(!1),a(I.tM),c(!0)}),[]),(0,l.createElement)(o.Z,{isVerticallyCentered:!0},(0,l.createElement)(r.Z,{title:null==d?void 0:d.heading,subtitle:null==d?void 0:d.subheading}),(0,l.createElement)(T,null))}}}]);