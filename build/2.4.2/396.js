"use strict";(self.webpackChunknewfold_Onboarding=self.webpackChunknewfold_Onboarding||[]).push([[396],{9396:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var a=n(1609),o=n(8468),s=n(7143),l=n(6427),c=n(7675),r=n(7723),_=n(1056),i=n(2202),m=n(8744);const d=({baseClassName:e,group:t,selectedGroup:n,handleGroupSelect:o})=>(0,a.createElement)("div",{className:`${e}__font-group__container`,key:t.id},(0,a.createElement)("div",{className:`${e}__font-group__container__button`,role:"presentation",onClick:()=>o(t.id)},(0,a.createElement)("span",{className:`${e}__font-group__container__button__icon${n===t.id?" selected":""}`}),(0,a.createElement)("div",{className:`${e}__font-group__container__button__font-name__container`},(0,a.createElement)("span",{className:`${e}__font-group__container__button__font-name__container__heading`,style:{fontFamily:t.headings}},t.headings),(0,a.createElement)("br",null),(0,a.createElement)("span",{className:`${e}__font-group__container__button__font-name__container__body`,style:{fontFamily:t.body}},t.body)),0===t.id&&(0,a.createElement)("span",{className:"default"},(0,r.__)("Default","wp-module-onboarding")))),u=({baseClassName:e,customFont:t,setCustomFont:n,handleCancelCustomFonts:o,handleApplyCustomFonts:s,renderFontOptions:c})=>(0,a.createElement)("div",{className:`${e}__fonts-form__container`},(0,a.createElement)("h5",{className:`${e}__heading`},(0,r.__)("CUSTOM FONTS","wp-module-onboarding")),(0,a.createElement)("div",null,(0,a.createElement)("div",null,(0,a.createElement)("div",null,(0,a.createElement)("span",{htmlFor:"headings"},(0,r.__)("Headings","wp-module-onboarding")),(0,a.createElement)("br",null),(0,a.createElement)("select",{id:"headings",value:t.headings,onChange:e=>n({...t,headings:e.target.value})},(0,a.createElement)("option",null,"select"),c())),(0,a.createElement)("div",null,(0,a.createElement)("span",{htmlFor:"body"},(0,r.__)("Body","wp-module-onboarding")),(0,a.createElement)("br",null),(0,a.createElement)("select",{id:"body",value:t.body,onChange:e=>n({...t,body:e.target.value})},(0,a.createElement)("option",null,(0,r.__)("select","wp-module-onboarding")),c()))),(0,a.createElement)("div",{className:`${e}__fonts-form__container__button__container`},(0,a.createElement)(l.Button,{className:"cancel",onClick:()=>o()},(0,r.__)("Cancel","wp-module-onboarding")),(0,a.createElement)(l.Button,{className:"apply",onClick:s,variant:"primary"},(0,r.__)("Apply","wp-module-onboarding"))))),g=({baseClassName:e,selectedGroup:t,selectedCustomFont:n,handleGroupSelect:o,handleEditCustomFont:s})=>(0,a.createElement)("div",{className:`${e}__custom-fonts__container`},(0,a.createElement)("div",{className:`${e}__custom-fonts__container__header`},(0,a.createElement)("h5",{className:`${e}__heading`},(0,a.createElement)("span",null,(0,r.__)("CUSTOM FONTS","wp-module-onboarding"))),(0,a.createElement)("button",{onClick:()=>s()},(0,r.__)("Edit fonts","wp-module-onboarding"))),(0,a.createElement)("div",{className:`${e}__font-group__container`},(0,a.createElement)("div",{className:`${e}__font-group__container__button`,role:"presentation",onClick:()=>o("custom")},(0,a.createElement)("span",{className:`${e}__font-group__container__button__icon${"custom"===t?" selected":""}`}),(0,a.createElement)("div",{className:`${e}__font-group__container__button__font-name__container`},(0,a.createElement)("span",{className:`${e}__font-group__container__button__font-name__container__heading`,style:{fontFamily:n.headings}},n.headings),(0,a.createElement)("br",null),(0,a.createElement)("span",{className:`${e}__font-group__container__button__font-name__container__body`,style:{fontFamily:n.body}},n.body))))),p=(0,a.forwardRef)((({baseClassName:e="nfd-onboarding-sidebar--customize__design-fonts-panel"},t)=>{const n=()=>{p(),C(null);const e=f.sitegen?.homepages?.active?.slug;e&&(f.sitegen.homepages.data[e].selectedFontGroup=null,f.sitegen.homepages.active.selectedFontGroup=null,E(f))},p=(e="",t="")=>{const n=f.sitegen?.homepages?.active?.slug;if(!n)return;const a={blocks:[{"core/heading":{typography:{fontFamily:e}},"core/body":{typography:{fontFamily:t}}}]},o={...f.sitegen.homepages.data[n],styles:a};f.sitegen.homepages.data[n]=o,f.sitegen.homepages.active=o,E(f)};(0,a.useImperativeHandle)(t,(()=>({resetToDefaultFonts:n})));const{currentData:f,customizeSidebarData:b}=(0,s.useSelect)((e=>({customizeSidebarData:e(c.M).getCustomizeSidebarData(),currentData:e(c.M).getCurrentOnboardingData()}))),h=b?.designStyles,{setCurrentOnboardingData:E}=(0,s.useDispatch)(c.M),y=h.map(((e,t)=>({id:t,headings:e.font_heading_name||e.font_heading,body:e.font_content_name||e.font_content,headingsSlug:e.font_heading,bodySlug:e.font_content}))),[v,C]=(0,o.useState)(null),[N,F]=(0,o.useState)(!1),[$,w]=(0,o.useState)({headings:"",body:""}),[S,k]=(0,o.useState)(null),[G,O]=(0,o.useState)(!1),D=h?.map((e=>e.font_heading)),B=h?.map((e=>e.font_content));(0,o.useEffect)((()=>{const e=f.sitegen.homepages.active.customFont,t=f.sitegen.homepages.active.selectedFontGroup;!$.headings&&e&&(w(e),k(e)),v||!t&&0!==t||(C(t),"custom"===t&&F(!0))}),[f]),(0,o.useEffect)((()=>{null!=v&&(()=>{let e,t;const n=f.sitegen?.homepages?.active?.slug;"custom"===v?(e=`var(--wp--preset--font-family--${$.headings})`,t=`var(--wp--preset--font-family--${$.body})`,n&&(f.sitegen.homepages.data[n].customFont=$,f.sitegen.homepages.active.customFont=$)):(e=`var(--wp--preset--font-family--${y[v].headingsSlug})`,t=`var(--wp--preset--font-family--${y[v].bodySlug})`),f.sitegen.homepages.data[n].selectedFontGroup=v,f.sitegen.homepages.active.selectedFontGroup=v,p(e,t)})()}),[v,$]);const M=[...new Set([...D,...B])],T=e=>{"custom"!==e&&S&&F(!1),C(e);const t={headings:y[e].headings,body:y[e].body};(0,_.v)(new _.iC(i.ce,"generated",{fonts:t,source:m.d0}))};return(0,a.createElement)(l.PanelBody,{className:e,initialOpen:!0},(0,a.createElement)(l.PanelRow,null,(0,a.createElement)("div",{className:`${e}__container`},(0,a.createElement)("div",{className:`${e}__container__text`},(0,a.createElement)("p",{className:`${e}__container__text__heading`},(0,a.createElement)("strong",null,(0,r.__)("Fonts","wp-module-onboarding")))),(0,a.createElement)("div",null,y.map((t=>(0,a.createElement)(d,{baseClassName:e,key:t.id,group:t,selectedGroup:v,handleGroupSelect:T})))))),(0,a.createElement)(l.PanelRow,null,!N&&(0,a.createElement)("div",{className:`${e}__container`},(0,a.createElement)(l.Button,{onClick:()=>{F(!0),C("custom"),S||O(!0)}},(0,r.__)("Select your own fonts","wp-module-onboarding"))),N&&G&&(0,a.createElement)(u,{baseClassName:e,customFont:$,setCustomFont:w,handleCancelCustomFonts:()=>{S.heading&&S.body?O(!1):F(!1)},handleApplyCustomFonts:()=>{C(null),k($),(0,_.v)(new _.iC(i.ce,"custom",{fonts:$,source:m.d0})),O(!1),C("custom")},renderFontOptions:()=>M.map((e=>(0,a.createElement)("option",{key:e,value:e},e)))}),N&&!G&&(0,a.createElement)(g,{baseClassName:e,selectedGroup:v,selectedCustomFont:S,handleGroupSelect:T,handleEditCustomFont:()=>{O(!0)}})))}))}}]);